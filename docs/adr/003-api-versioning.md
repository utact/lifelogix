# [ADR-003] URL 경로 기반 API 버전 관리 전략 채택

- **Status:** Adopted
- **Last Updated:** 2025-10-19

---

## 요약 (Summary)

API의 명확성과 테스트 용이성을 위해, URL 경로에 버전을 명시하는 방식(e.g., `/api/v1/...`)을 표준 버전 관리 전략으로 채택한다.

---

## Context (컨텍스트)

API는 기능 개선, 정책 변경 등으로 인해 필연적으로 변경된다. 특히 기존 클라이언트의 동작에 영향을 줄 수 있는 '파괴적 변경(Breaking Change)'이 발생할 경우, 신규 버전과 구버전 API를 안정적으로 함께 제공할 수 있는 버전 관리 전략이 필요하다. 이를 위해 URL 경로, 쿼리 파라미터, 커스텀 헤더 등 다양한 버전 관리 방식을 검토했다.

---

## Decision (결정)

**URL 경로에 버전을 명시하는 'URL Path Versioning' 전략을 채택한다.**

- 모든 API 엔드포인트는 `/api/{version}/...` 형태의 구조를 가진다. (예: `/api/v1/timeline`)
- 버전은 `v1`, `v2`와 같이 자연수를 사용하여 표기한다.
- 파괴적 변경이 없는 기능 개선이나 버그 수정은 버전을 올리지 않는다. 오직 요청/응답의 스키마 변경과 같이 하위 호환성을 보장할 수 없는 경우에만 메이저 버전을 올린다.

---

## Consequences (결과)

### 긍정적
- **명확성 및 직관성:** URL 주소만으로 어떤 버전의 API를 사용하는지 명확하게 알 수 있어, API를 사용하는 클라이언트 개발자의 혼란을 최소화하고 사용성을 높인다.
- **테스트 용이성:** 브라우저, Postman, curl 등 모든 HTTP 클라이언트에서 별도의 설정 없이 URL을 호출하는 것만으로 간단하게 API를 테스트하고 디버깅할 수 있다.
- **독립적인 버전 관리:** 각 버전별 API 구현을 컨트롤러 레벨에서 명확하게 분리할 수 있어, 코드의 유지보수 및 관리가 용이하다.

### 부정적
- **URL 길이 증가:** API 주소에 버전 정보가 포함되어 URL의 길이가 다소 길어질 수 있다.
- **리소스 위치의 비일관성:** 동일한 리소스가 여러 버전의 URL로 표현될 수 있어, RESTful 원칙의 '유일한 리소스 식별자' 측면에서는 다소 벗어날 수 있다.

# [ADR-010] DTO 설계를 `Record` 우선 사용으로 통일

- **Status:** Adopted
- **Supersedes:** `ADR-002-dto-design-for-request-response.md`
- **Last Updated:** 2025-10-06

---

## Context (컨텍스트)

`ADR-002`에서는 요청(Request) DTO는 `Class`로, 응답(Response) DTO는 `Record`로 설계하는 원칙을 수립했다. 이는 과거 Spring 프레임워크와의 안정적인 호환성(기본 생성자, Setter 기반 데이터 바인딩)을 최우선으로 고려한 보수적인 결정이었다.

그러나 현재 프로젝트의 기술 스택(Modern Java 17+, Spring Boot 3+)에서는 `Record` 타입에 대한 지원이 완벽하게 이루어지고 있다. Jackson 라이브러리는 `Record`의 생성자를 통해 JSON 역직렬화를 문제없이 수행하며, 필드에 직접 유효성 검사(`@Valid`) 어노테이션을 적용하는 것 또한 완벽하게 지원된다.

기존 `ADR-002`의 원칙은 불필요한 보일러플레이트 코드를 유발하고, 최신 언어의 장점을 완전히 활용하지 못하는 문제가 있었다.

---

## Decision (결정)

프로젝트의 생산성, 코드 간결성, 데이터 안정성을 극대화하기 위해 DTO 설계 원칙을 다음과 같이 통일한다.

> **모든 DTO (Request, Response 포함)는 `record` 타입을 우선적으로 사용한다.**

`Class`는 DTO 내부에 변경 가능한 상태나 복잡한 로직이 필요한 매우 드문 예외적인 경우에만 사용한다.

---

## Consequences (결과)

### 긍정적
- **코드 간결성 증대**: 모든 DTO에서 생성자, Getter, `equals()`, `hashCode()` 등의 보일러플레이트 코드가 완전히 사라져 생산성이 향상된다.
- **데이터 불변성 확보**: 요청 DTO 또한 불변 객체로 다루게 되어, 서비스 로직 내에서 데이터가 예기치 않게 변경될 가능성을 원천적으로 차단하여 시스템 전체의 안정성이 높아진다.
- **컨벤션 단순화**: '요청'과 '응답'을 구분할 필요 없이 'DTO는 record'라는 단일 규칙이 적용되어 코드의 일관성이 향상된다.

### 부정적
- `ADR-002`가 폐기된다. (이 문서의 목적)
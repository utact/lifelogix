# [ADR-007] 도메인 중심 패키지 구조 채택

- **Status:** Adopted
- **Last Updated:** 2025-10-19

---

## 요약 (Summary)

기능의 높은 응집도와 낮은 결합도를 위해, 비즈니스 기능 단위로 코드를 구성하는 '도메인 중심 패키지 구조(Package by Feature)'를 채택한다.

---

## Context (컨텍스트)

프로젝트의 규모가 커짐에 따라, 기존의 계층형 패키지 구조(기술 중심: `controller`, `service`, `repository`)는 기능의 응집도를 떨어뜨리고 유지보수를 어렵게 만들 수 있다. 특정 기능을 수정하기 위해 여러 패키지를 넘나들어야 하는 비효율이 발생할 수 있으므로, 확장성을 고려한 새로운 패키지 구조 전략이 필요하다.

---

## Decision (결정)

**비즈니스 기능 단위로 코드를 구성하는 '도메인 중심 패키지 구조(Package by Feature)'를 채택한다.**

1.  **최상위 패키지는 도메인으로 구성:**
    -   `user`, `timeline`, `activity` 등 비즈니스 도메인을 최상위 패키지로 구성한다.

2.  **각 도메인 내부의 계층 분리:**
    -   각 도메인 패키지 내부에 `api`, `application`, `domain` 등의 하위 패키지를 두어 역할을 분리한다. 이는 헥사고날 아키텍처의 설계 원칙을 따른다.
        -   **`api`**: 외부 세계와의 접점. (`@RestController`, DTO)
        -   **`application`**: 응용 서비스 및 트랜잭션 관리. (`@Service`)
        -   **`domain`**: 순수 비즈니스 로직과 데이터. (`@Entity`, Repository 인터페이스)

3.  **의존성 규칙 적용:**
    -   의존성의 방향은 항상 외부(`api`)에서 내부(`domain`)로 향해야 한다. (`api` → `application` → `domain`)
    -   `domain` 패키지는 다른 어떤 계층에도 의존하지 않음으로써 비즈니스 로직의 독립성과 안정성을 확보한다.

---

## Consequences (결과)

### 긍정적
- **높은 응집도와 낮은 결합도:** 특정 기능과 관련된 코드가 하나의 도메인 패키지 내에 모여있어 코드의 이해와 수정이 용이하며, 모듈 간의 의존성이 낮아진다.
- **향상된 확장성:** 새로운 기능이 추가될 때, 기존 코드에 미치는 영향을 최소화하며 독립적인 모듈로 개발할 수 있다.
- **명확한 아키텍처:** 프로젝트 전체에 일관된 구조적 규칙이 적용되어 개발자 간의 협업 효율성이 증대되고, 신규 입사자의 적응 기간이 단축된다.

### 부정적
- **초기 설계 복잡도:** 초기 아키텍처 설계 시 각 도메인의 경계를 명확히 정의해야 하는 부담이 있다.
- **패키지 구조의 깊이 증가:** 계층형 구조에 비해 패키지의 깊이가 깊어져, 클래스 탐색에 약간의 불편함이 있을 수 있다.
